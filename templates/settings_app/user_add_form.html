{% extends "base.html" %}
{% block page_title %}Add User{% endblock %}
{% block page_subtitle %}Tenant: {{ tenant.name }}{% endblock %}

{% block content %}
<div class="card" style="margin-bottom:14px;">
  <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;">
    <div>
      <div style="font-weight:850; font-size:16px; margin-bottom:4px;">Create a new user</div>
      <div style="opacity:.85; font-size:13px; max-width:780px;">
        This creates a Django user account and adds them to this tenant. Invites are planned later.
      </div>
    </div>
    <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
      <a class="btn btn-secondary" href="{% url 'settings_app:users_list' %}">Back to Users</a>
    </div>
  </div>
</div>

<div class="card">
  <form method="post">
    {% csrf_token %}
    <div style="display:grid; gap:12px; grid-template-columns: repeat(12, 1fr);">
      <div style="grid-column: span 6;">
        <label class="small strong">Username</label>
        {{ form.username }}
        {% if form.username.errors %}<div class="small" style="opacity:.8;">{{ form.username.errors }}</div>{% endif %}
      </div>
      <div style="grid-column: span 6;">
        <label class="small strong">Email</label>
        {{ form.email }}
        {% if form.email.errors %}<div class="small" style="opacity:.8;">{{ form.email.errors }}</div>{% endif %}
      </div>

      <div style="grid-column: span 6;">
        <label class="small strong">First name</label>
        {{ form.first_name }}
      </div>
      <div style="grid-column: span 6;">
        <label class="small strong">Last name</label>
        {{ form.last_name }}
      </div>

      <div style="grid-column: span 6;">
        <label class="small strong">Role</label>
        {{ form.role }}
      </div>
      <div style="grid-column: span 6;"></div>

      <div style="grid-column: span 6;">
        <label class="small strong">Password</label>
        {{ form.password1 }}
        {% if form.password1.errors %}<div class="small" style="opacity:.8;">{{ form.password1.errors }}</div>{% endif %}
      </div>
      <div style="grid-column: span 6;">
        <label class="small strong">Confirm password</label>
        {{ form.password2 }}
        {% if form.password2.errors %}<div class="small" style="opacity:.8;">{{ form.password2.errors }}</div>{% endif %}
      </div>
    </div>

    {% if form.non_field_errors %}<div class="small" style="opacity:.8; margin-top:10px;">{{ form.non_field_errors }}</div>{% endif %}

    <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:14px;">
      <button class="btn" type="submit">Create user</button>
    </div>
  </form>
</div>
{% endblock %}
