{% extends "base.html" %}
{% block page_title %}Settings{% endblock %}
{% block page_subtitle %}Tenant configuration and management{% endblock %}

{% block content %}

<div class="settings-wrap">

  <-----------------+------------------ Header / Summary -->
  <div class="card settings-hero">
    <div class="settings-hero-left">
      <div class="settings-title">Control Center</div>
      <div class="settings-subtitle">
        Manage organization settings for the active tenant, then users/roles and billing later.
      </div>

      <div class="settings-meta">
        <span class="pill">
          <span class="dot"></span>
          Tenant: <strong>{% if tenant %}{{ tenant }}{% else %}Not selected{% endif %}</strong>
        </span>
        <span class="pill">
          User: <strong>{{ user_display }}</strong>
        </span>
        {% if tenant %}
          <span class="pill subtle">Tenant ID: <strong>{{ tenant.id }}</strong></span>
        {% endif %}
      </div>
    </div>

    <div class="settings-hero-right">
      <div class="mini-actions">
        <a class="btn btn-ghost disabled" href="javascript:void(0)" aria-disabled="true" title="Coming next">
          Edit Organization
        </a>
        <a class="btn btn-ghost disabled" href="javascript:void(0)" aria-disabled="true" title="Coming soon">
          Manage Users
        </a>
      </div>
      <div class="hint">
        We’ll activate these actions as we build each settings section.
      </div>
    </div>
  </div>

  {% if not tenant %}
    <div class="card warn">
      <div class="warn-title">No tenant selected</div>
      <div class="warn-text">
        Your tenant middleware didn’t attach <code>request.tenant</code> for this request.
        If your flow requires choosing a tenant first, next step we can redirect this page to the tenant select screen.
      </div>
    </div>
  {% endif %}

  <-----------------+------------------ Settings Sections -->
  <div class="settings-grid">
    {% for s in sections %}
      <div class="card settings-card">
        <div class="settings-card-head">
          <div>
            <div class="settings-card-title">{{ s.title }}</div>
            <div class="settings-card-desc">{{ s.desc }}</div>
          </div>
          <div class="settings-card-cta">
            <button class="btn btn-ghost disabled" type="button" title="{{ s.cta.hint }}" aria-disabled="true">
              {{ s.cta.label }}
            </button>
          </div>
        </div>

        <div class="settings-kv">
          {% for item in s.items %}
            <div class="kv">
              <div class="k">{{ item.label }}</div>
              <div class="v">{{ item.value }}</div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>

</div>

<style>
  /* Keep this scoped so we don't disturb your global theme */
  .settings-wrap{ display:flex; flex-direction:column; gap:14px; }

  .settings-hero{
    display:flex; justify-content:space-between; gap:14px; align-items:stretch;
  }
  @media (max-width: 980px){
    .settings-hero{ flex-direction:column; }
  }

  .settings-title{ font-size:18px; font-weight:900; letter-spacing:.02em; }
  .settings-subtitle{ opacity:.78; margin-top:6px; max-width:760px; }

  .settings-meta{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.03);
    font-size:12px; font-weight:800;
  }
  .pill.subtle{ opacity:.85; }
  .dot{ width:8px; height:8px; border-radius:50%; background: rgba(37,214,255,.9); box-shadow: 0 0 0 4px rgba(37,214,255,.12); }

  .settings-hero-right{ display:flex; flex-direction:column; gap:10px; justify-content:space-between; min-width:260px; }
  .mini-actions{ display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; }
  .hint{ opacity:.72; font-size:12px; text-align:right; }

  .settings-grid{
    display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:14px;
  }
  @media (max-width: 980px){
    .settings-grid{ grid-template-columns: 1fr; }
  }

  .settings-card-head{ display:flex; gap:12px; align-items:flex-start; justify-content:space-between; }
  .settings-card-title{ font-size:15px; font-weight:900; }
  .settings-card-desc{ opacity:.74; margin-top:4px; font-size:13px; }

  .settings-kv{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; margin-top:12px; }
  @media (max-width: 520px){
    .settings-kv{ grid-template-columns: 1fr; }
  }

  .kv{ padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.03); }
  .kv .k{ font-size:12px; letter-spacing:.02em; text-transform:uppercase; opacity:.72; margin-bottom:6px; }
  .kv .v{ font-size:14px; }

  .warn{ border:1px solid rgba(255,195,66,.30); background: rgba(255,195,66,.07); }
  .warn-title{ font-weight:900; }
  .warn-text{ opacity:.85; margin-top:6px; }

  /* Disabled buttons (we keep consistent with your theme) */
  .disabled{ opacity:.55; pointer-events:none; }
</style>

{% endblock %}
