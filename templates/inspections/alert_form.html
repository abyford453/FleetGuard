{% extends "base.html" %}
{% block page_title %}Edit Alert{% endblock %}
{% block page_subtitle %}Update severity, status, assignment, and details{% endblock %}
{% block content %}

<style>
  .panel{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:16px;box-shadow:0 12px 34px rgba(0,0,0,.25);max-width:980px;}
  .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;}
  .grid .full{grid-column:1 / -1;}
  label{display:block;font-size:12px;letter-spacing:.08em;text-transform:uppercase;opacity:.75;margin-bottom:6px;}
  input,select,textarea{width:100%;}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);text-decoration:none;}
  .btn.primary{border-color:rgba(37,214,255,.35);}
  .btn.danger{border-color:rgba(255,80,80,.35);}
  .muted{opacity:.70;}
  @media (max-width: 800px){ .grid{grid-template-columns:1fr;} }
</style>

<div class="panel">
  <p class="muted">
    <strong>Vehicle:</strong> {{ alert.vehicle }}<br>
    <strong>Inspection:</strong> {{ alert.inspection.inspection_date }} ({{ alert.inspection.inspection_type|default:"Inspection" }})
  </p>

  <form method="post">
    {% csrf_token %}

    <div class="grid">
      <div>
        <label for="{{ form.status.id_for_label }}">Status</label>
        {{ form.status }}
      </div>
      <div>
        <label for="{{ form.severity.id_for_label }}">Severity</label>
        {{ form.severity }}
      </div>
      <div>
        <label for="{{ form.assigned_to.id_for_label }}">Assigned To</label>
        {{ form.assigned_to }}
      </div>
      <div class="full">
        <label for="{{ form.title.id_for_label }}">Title</label>
        {{ form.title }}
      </div>
      <div class="full">
        <label for="{{ form.details.id_for_label }}">Details</label>
        {{ form.details }}
      </div>
    </div>

    <div class="actions">
      <button class="btn primary" type="submit">Save</button>
      <a class="btn" href="{% url 'inspections:alerts' %}">Cancel</a>
      {% if alert.status != "closed" %}
        <form method="post" action="{% url 'inspections:alert_close' alert.id %}">
          {% csrf_token %}
          <button class="btn danger" type="submit">Close Alert</button>
        </form>
      {% endif %}
    </div>
  </form>
</div>

{% endblock %}
