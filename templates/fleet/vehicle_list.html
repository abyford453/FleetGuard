{% extends "base.html" %}
{% block page_title %}Vehicles{% endblock %}
{% block page_subtitle %}Tenant: {{ tenant.name }}{% endblock %}
{% block content %}
  <div class="panel">
    <form method="get" style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;">
      <div style="flex:1; min-width:240px;">
        <input name="q" value="{{ q }}" placeholder="Search unit, VIN, plate, make, model..." />
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn" type="submit">Search</button>
        <a class="btn" href="{% url 'fleet:vehicle_list' %}">Reset</a>
        <a class="btn primary" href="{% url 'fleet:vehicle_create' %}">Add Vehicle</a>
      </div>
    </form>

    <div style="margin-top:14px; display:grid; gap:10px;">
      {% if vehicles %}
        {% for v in vehicles %}
          <div class="panel" style="padding:14px;">
            <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
              <div>
                <div style="font-weight:900;">
                  <a href="{% url 'fleet:vehicle_detail' v.id %}">
                    {{ v.unit_number|default:"(No Unit #)" }} — {{ v.make }} {{ v.model }} {% if v.year %}({{ v.year }}){% endif %}
                  </a>
                </div>
                <div class="muted" style="margin-top:4px;">
                  Plate: {{ v.plate|default:"—" }} • VIN: {{ v.vin|default:"—" }} • Status: {{ v.get_status_display }}
                </div>
              </div>
              <div style="display:flex; gap:10px;">
                <a class="btn" href="{% url 'fleet:vehicle_update' v.id %}">Edit</a>
                <a class="btn" href="{% url 'fleet:vehicle_delete' v.id %}">Delete</a>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="muted">No vehicles yet. Click “Add Vehicle” to create your first one.</div>
      {% endif %}
    </div>
  </div>
{% endblock %}
